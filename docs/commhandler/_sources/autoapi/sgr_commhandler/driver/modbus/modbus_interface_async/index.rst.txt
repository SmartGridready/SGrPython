sgr_commhandler.driver.modbus.modbus_interface_async
====================================================

.. py:module:: sgr_commhandler.driver.modbus.modbus_interface_async


Attributes
----------

.. autoapisummary::

   sgr_commhandler.driver.modbus.modbus_interface_async.logger


Classes
-------

.. autoapisummary::

   sgr_commhandler.driver.modbus.modbus_interface_async.ModbusDataPoint
   sgr_commhandler.driver.modbus.modbus_interface_async.ModbusFunctionalProfile
   sgr_commhandler.driver.modbus.modbus_interface_async.SGrModbusInterface


Functions
---------

.. autoapisummary::

   sgr_commhandler.driver.modbus.modbus_interface_async.get_rtu_slave_id
   sgr_commhandler.driver.modbus.modbus_interface_async.get_tcp_slave_id
   sgr_commhandler.driver.modbus.modbus_interface_async.get_endian
   sgr_commhandler.driver.modbus.modbus_interface_async.get_address_offset
   sgr_commhandler.driver.modbus.modbus_interface_async.get_tcp_address
   sgr_commhandler.driver.modbus.modbus_interface_async.get_tcp_port
   sgr_commhandler.driver.modbus.modbus_interface_async.get_rtu_serial_port
   sgr_commhandler.driver.modbus.modbus_interface_async.get_rtu_baudrate
   sgr_commhandler.driver.modbus.modbus_interface_async.get_rtu_parity
   sgr_commhandler.driver.modbus.modbus_interface_async.build_modbus_data_point
   sgr_commhandler.driver.modbus.modbus_interface_async.is_integer_type
   sgr_commhandler.driver.modbus.modbus_interface_async.is_float_type


Module Contents
---------------

.. py:data:: logger

.. py:function:: get_rtu_slave_id(modbus_rtu)

   returns the selected slave address


.. py:function:: get_tcp_slave_id(modbus_tcp)

   returns the selected slave address


.. py:function:: get_endian(modbus)

   returns the byte order.


.. py:function:: get_address_offset(modbus)

   returns the address offset.
   is 0 by default and -1 when first register address is 1.


.. py:function:: get_tcp_address(modbus_tcp)

   returns the selected ip address.


.. py:function:: get_tcp_port(modbus_tcp)

   returns the selected ip port.


.. py:function:: get_rtu_serial_port(modbus_rtu)

   returns the selected serial port.


.. py:function:: get_rtu_baudrate(modbus_rtu)

   returns the selected baudrate.


.. py:function:: get_rtu_parity(modbus_rtu)

   returns the parity.


.. py:function:: build_modbus_data_point(data_point, functional_profile, interface)

   Builds a data point of a Modbus interface.


.. py:function:: is_integer_type(data_type)

   Checks if a data type is an integer.

   :returns: True if integer, False otherwise
   :rtype: bool


.. py:function:: is_float_type(data_type)

   Checks if a data type is a floating point value.

   :returns: True if integer, False otherwise
   :rtype: bool


.. py:class:: ModbusDataPoint(dp_spec, fp_spec, interface)

   Bases: :py:obj:`sgr_commhandler.api.data_point_api.DataPointProtocol`


   Implements a data point of a Modbus interface.


   .. py:attribute:: _dp_spec


   .. py:attribute:: _fp_spec


   .. py:attribute:: _interface


   .. py:attribute:: _dp_name
      :type:  str
      :value: ''



   .. py:attribute:: _fp_name
      :type:  str
      :value: ''



   .. py:attribute:: _address
      :type:  int
      :value: -1



   .. py:attribute:: _data_type
      :type:  sgr_specification.v0.product.modbus_types.ModbusDataType


   .. py:attribute:: _size
      :value: 0



   .. py:attribute:: _register_type
      :type:  sgr_specification.v0.product.modbus_types.RegisterType


   .. py:method:: set_val(value)
      :async:


      Writes the data point value.

      :param value: the data point value to write
      :type value: Any



   .. py:method:: get_val(skip_cache = False)
      :async:


      Reads the data point value.

      :param skip_cache: does not use cache if true
      :type skip_cache: bool

      :returns: the data point value
      :rtype: Any



   .. py:method:: name()

      Gets the functional profile and data point names.

      :returns: the functional profile and data point names as tuple
      :rtype: tuple[str, str]



   .. py:method:: direction()

      Gets the data direction of the data point.

      :returns: the data point direction
      :rtype: DataDirectionProduct



   .. py:method:: unit()

      Gets the unit of measurement of the data point.

      :returns: the unit
      :rtype: Units



.. py:class:: ModbusFunctionalProfile(fp_spec, interface)

   Bases: :py:obj:`sgr_commhandler.api.functional_profile_api.FunctionalProfile`


   Implements a functional profile of a Modbus interface.


   .. py:attribute:: _fp_spec


   .. py:attribute:: _interface


   .. py:attribute:: _data_points


   .. py:method:: name()

      Gets the functional profile name.

      :returns: the functional profile name
      :rtype: str



   .. py:method:: get_data_points()

      Gets all data points.

      :returns: all data points
      :rtype: dict[tuple[str, str], DataPoint]



.. py:class:: SGrModbusInterface(frame, sharedRTU = False)

   Bases: :py:obj:`sgr_commhandler.api.device_api.SGrBaseInterface`


   Implements a Modbus device interface.


   .. py:attribute:: _client_wrapper
      :type:  sgr_commhandler.driver.modbus.shared_client.ModbusClientWrapper
      :value: None



   .. py:attribute:: byte_order


   .. py:attribute:: address_offset
      :value: -1



   .. py:attribute:: functional_profiles


   .. py:attribute:: _device_id
      :value: ''



   .. py:method:: __del__()


   .. py:method:: is_connected()

      Gets the connection state.

      :returns: the connection state
      :rtype: bool



   .. py:method:: connect_async()
      :async:


      Connects the device asynchronously.



   .. py:method:: disconnect_async()
      :async:


      Disconnects the device asynchronously.



   .. py:method:: read_data(reg_type, address, size, data_type)
      :async:


      Reads data from the given Modbus address(es).



   .. py:method:: write_data(reg_type, address, data_type, value)
      :async:


      Writes data to the given Modbus address(es).



   .. py:method:: set_slave_id(slave_id)


