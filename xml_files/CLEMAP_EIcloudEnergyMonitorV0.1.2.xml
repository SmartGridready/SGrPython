<?xml version="1.0" encoding="UTF-8"?>
<sgr:SGrRestAPIDeviceFrame
	deviceName="CLEMAP Energy Monitor" isLocalControl="false"
	manufacturerID="ClemapAG" manufacturerName="CLEMAP"
	xmlns:sgr="http://www.smartgridready.ch/ns/SGr/V0/"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.smartgridready.ch/ns/SGr/V0/ ../../SchemaDatabase/SGr/EI-RestAPI/SGrRestAPI_EIDeviceFrame.xsd ">
	<sgr:deviceProfile>
		<sgr:transportService>RESTfulJSON</sgr:transportService>
		<sgr:deviceKind>SubMeter</sgr:deviceKind>
		<sgr:manufSpecIdent>sgr:manufSpecIdent</sgr:manufSpecIdent>
		<sgr:remAuthorID>ClemapAG</sgr:remAuthorID>
	</sgr:deviceProfile>
	<sgr:restAPIInterfaceDesc>
		<sgr:RestAPIInterfaceSelection>trspSrvRestURI</sgr:RestAPIInterfaceSelection>
		<sgr:trspSrvRestURIoutOfBox>b1.cloud.clemap.com:3032</sgr:trspSrvRestURIoutOfBox>
		<sgr:restAPIAuthenticationMethod>BearerSecurityScheme</sgr:restAPIAuthenticationMethod>
		<sgr:restAPIBearer>
			<sgr:restAPIEndPoint request='{"strategy": "local", "email": "{{username}}", "password": "{{password}}"}'>/authentication</sgr:restAPIEndPoint>
			<sgr:restAPIJMESPath>accessToken</sgr:restAPIJMESPath>
		</sgr:restAPIBearer>
	</sgr:restAPIInterfaceDesc>
	<sgr:fpListElement>
		<sgr:functionalProfile
			MROVisibilityIndicator="M" ProfileName="ActivePowerAC">
			<sgr:ProfileNumber>
				<sgr:SpecsOwnerId>0</sgr:SpecsOwnerId>
				<sgr:ProfileIdentification>SubMeterElectricity</sgr:ProfileIdentification>
				<sgr:SubProfileIdent>ActivePowerAC</sgr:SubProfileIdent>
				<sgr:SGrLevelOfOperation>4</sgr:SGrLevelOfOperation>
				<sgr:VersionNumber>
					<sgr:primaryVersionNumber>0
					</sgr:primaryVersionNumber>
					<sgr:secondaryVersionNumber>1
					</sgr:secondaryVersionNumber>
					<sgr:subReleaseVersionNumber>2
					</sgr:subReleaseVersionNumber>
				</sgr:VersionNumber>
			</sgr:ProfileNumber>
		</sgr:functionalProfile>
		<sgr:dpListElement>
			<sgr:dataPoint DatapointName="ActivePowerACtot"
				RWPDatadirection="R" unit="KILOWATTS" MROVisibilityIndicator="M">
				<sgr:basicDataType dpTypeSelected="FLOAT32" />
			</sgr:dataPoint>
			<sgr:restAPIDataPoint DataType="JSON_number">
				<sgr:restAPIScheme>/digitaltwins/?sensor_id=sensor</sgr:restAPIScheme>
				<sgr:restAPIExpiration>10.0</sgr:restAPIExpiration>
				<sgr:restAPIEndPoint>/digitaltwins/?sensor_id={{sensor_id}}</sgr:restAPIEndPoint>
				<sgr:restAPIJMESPath>sum([[0].ten_sec.p_l1,[0].ten_sec.p_l2,[0].ten_sec.p_l3])</sgr:restAPIJMESPath>
			</sgr:restAPIDataPoint>
		</sgr:dpListElement>
		<sgr:dpListElement>
			<sgr:dataPoint DatapointName="ActivePowerACL1"
				RWPDatadirection="R" unit="KILOWATTS" MROVisibilityIndicator="M">
				<sgr:basicDataType dpTypeSelected="FLOAT32" />
			</sgr:dataPoint>
			<sgr:restAPIDataPoint DataType="JSON_number">
				<sgr:restAPIScheme>/digitaltwins/?sensor_id=sensor</sgr:restAPIScheme>
				<sgr:restAPIExpiration>10.0</sgr:restAPIExpiration>
				<sgr:restAPIEndPoint>/digitaltwins/?sensor_id={{sensor_id}}</sgr:restAPIEndPoint>
				<sgr:restAPIJMESPath>[0].ten_sec.p_l1</sgr:restAPIJMESPath>
			</sgr:restAPIDataPoint>
		</sgr:dpListElement>
		<sgr:dpListElement>
			<sgr:dataPoint DatapointName="ActivePowerACL2"
				RWPDatadirection="R" unit="KILOWATTS" MROVisibilityIndicator="R">
				<sgr:basicDataType dpTypeSelected="FLOAT32" />
			</sgr:dataPoint>
			<sgr:restAPIDataPoint DataType="JSON_number">
				<sgr:restAPIScheme>/digitaltwins/?sensor_id=sensor</sgr:restAPIScheme>
				<sgr:restAPIExpiration>10.0</sgr:restAPIExpiration>
				<sgr:restAPIEndPoint>/digitaltwins/?sensor_id={{sensor_id}}</sgr:restAPIEndPoint>
				<sgr:restAPIJMESPath>[0].ten_sec.p_l2</sgr:restAPIJMESPath>
			</sgr:restAPIDataPoint>
		</sgr:dpListElement>
		<sgr:dpListElement>
			<sgr:dataPoint MROVisibilityIndicator="R"
				DatapointName="ActivePowerACL3" RWPDatadirection="R"
				unit="KILOWATTS">
				<sgr:basicDataType dpTypeSelected="FLOAT32" />
			</sgr:dataPoint>
			<sgr:restAPIDataPoint DataType="JSON_number">
				<sgr:restAPIScheme>/digitaltwins/?sensor_id=sensor</sgr:restAPIScheme>
				<sgr:restAPIExpiration>10.0</sgr:restAPIExpiration>
				<sgr:restAPIEndPoint>/digitaltwins/?sensor_id={{sensor_id}}</sgr:restAPIEndPoint>
				<sgr:restAPIJMESPath>[0].ten_sec.p_l3</sgr:restAPIJMESPath>
			</sgr:restAPIDataPoint>
		</sgr:dpListElement>
	</sgr:fpListElement>
</sgr:SGrRestAPIDeviceFrame>